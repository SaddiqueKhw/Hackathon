<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NovaMart | Premium Online Shopping</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
    />
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />
    <style>
      :root {
        --primary: #ff9100;
        --primary-dark: #e68200;
        --primary-light: #ffa533;
        --secondary: #2a2d3e;
        --accent: #36d1dc;
        --light: #f7f9fc;
        --dark: #1a1c2b;
        --success: #4caf50;
        --warning: #ff9800;
        --info: #2196f3;
        --header-gradient: linear-gradient(135deg, #ff6b6b, #ff8e53, #ffa533);
        --header-dark: linear-gradient(135deg, #2a2d3e, #1a1c2b);
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: var(--light);
        color: #333;
        overflow-x: hidden;
      }
      .editable-text {
        outline: none;
        border: none;
        background: transparent;
        color: inherit;
        font: inherit;
      }
      .navbar {
        background: var(--header-gradient);
        box-shadow: 0 4px 20px rgba(255, 107, 107, 0.3);
      }

      .navbar-brand {
        font-weight: 700;
        font-size: 1.8rem;
        color: white;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      .nav-link {
        color: rgba(255, 255, 255, 0.9) !important;
        font-weight: 500;
        transition: all 0.3s;
        position: relative;
      }
      .animated-icon {
        color: #ff4500;
        animation: pulseScale 1.5s infinite ease-in-out;
        transform-origin: center;
      }

      @keyframes pulseScale {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.3);
        }
        100% {
          transform: scale(1);
        }
      }

      .nav-link:hover {
        color: white !important;
        transform: translateY(-2px);
      }

      .nav-link.active {
        color: white !important;
        font-weight: 600;
      }

      .nav-link.active::after {
        content: "";
        position: absolute;
        bottom: -5px;
        left: 0;
        width: 100%;
        height: 3px;
        background: white;
        border-radius: 2px;
      }

      .hero-section {
        background: var(--header-gradient);
        color: white;
        padding: 100px 0;
        margin-bottom: 40px;
        border-radius: 0 0 40px 40px;
        box-shadow: 0 10px 30px rgba(255, 107, 107, 0.2);
        position: relative;
        overflow: hidden;
      }

      .hero-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" preserveAspectRatio="none"><path d="M0,50 Q250,0 500,50 T1000,50 L1000,100 L0,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
        background-size: cover;
        background-position: bottom;
      }

      .page {
        display: none;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .active-page {
        display: block;
      }

      .product-card {
        background: white;
        border-radius: 20px;
        overflow: hidden;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        transition: all 0.4s ease;
        border: none;
        height: 100%;
      }

      .product-card:hover {
        transform: translateY(-12px);
        box-shadow: 0 20px 40px rgba(255, 145, 0, 0.2);
      }

      .product-image {
        height: 220px;
        object-fit: contain;
        padding: 20px;
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
         transition: all 0.5s ease-in-out;
      }
 .product-image:hover{
        transform: scale(1.2);
      }
      .product-title {
        font-weight: 600;
        font-size: 1.1rem;
        color: var(--dark);
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .product-price {
        font-weight: 700;
        color: var(--primary);
        font-size: 1.3rem;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        border: none;
        border-radius: 30px;
        padding: 12px 24px;
        font-weight: 600;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(255, 145, 0, 0.3);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 7px 20px rgba(255, 145, 0, 0.4);
      }

      .btn-outline-primary {
        border: 2px solid var(--primary);
        color: var(--primary);
        border-radius: 30px;
        font-weight: 600;
        transition: all 0.3s;
        padding: 10px 20px;
      }

      .btn-outline-primary:hover {
        background: var(--primary);
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(255, 145, 0, 0.3);
      }

      .cart-badge {
        background: white;
        color: var(--primary);
        border-radius: 50%;
        width: 22px;
        height: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        position: absolute;
        top: -8px;
        right: -8px;
        font-weight: 700;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
      }

      .cart-item {
        background: white;
        border-radius: 20px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        transition: all 0.3s;
      }

      .cart-item:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.12);
      }

      .cart-item-image {
        width: 100px;
        height: 100px;
        object-fit: contain;
        border-radius: 15px;
        background: #f8f9fa;
        padding: 10px;
      }

      .quantity-control {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .quantity-btn {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        background: white;
        border: 2px solid var(--primary);
        color: var(--primary);
        cursor: pointer;
        transition: all 0.2s;
        font-weight: bold;
      }

      .quantity-btn:hover {
        background: var(--primary);
        color: white;
        transform: scale(1.1);
      }

      .quantity-input {
        width: 50px;
        text-align: center;
        border: 2px solid #e1e5eb;
        border-radius: 10px;
        padding: 8px;
        font-weight: 600;
      }

      .checkout-card {
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
      }

      /* .form-control {
        border-radius: 12px;
        padding: 14px 18px;
        border: 2px solid #e1e5eb;
        transition: all 0.3s;
      }

      .form-control:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 0.2rem rgba(255, 145, 0, 0.25);
      } */
      .form-control {
        border-radius: 12px;
        padding: 14px 18px;
        border: 2px solid #e1e5eb;
        background-color: #fff;
        font-size: 16px;
        font-weight: 500;
        color: #333;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.03);
        transition: all 0.25s ease;
      }

      .form-control:focus {
        border-color: #ff6a00;
        box-shadow: 0 0 0 4px rgba(255, 106, 0, 0.15);
        outline: none;
        background-color: #fff;
        color: #111;
      }

      .form-control::placeholder {
        color: #9ca3af;
        opacity: 1;
        font-weight: 400;
      }

      .form-control:disabled {
        background-color: #f3f4f6;
        color: #9ca3af;
        border-color: #e5e7eb;
        cursor: not-allowed;
      }
      .form-control:hover:not(:disabled):not(:focus) {
        border-color: #d0d7de;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      }

      .filter-card {
        background: white;
        border-radius: 20px;
        padding: 25px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        margin-bottom: 30px;
      }

      .price-slider {
        width: 100%;
      }

      .footer {
        background: var(--header-dark);
        color: white;
        padding: 50px 0 30px;
        margin-top: 80px;
      }

      .loading-spinner {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 9999;
      }

      .total-price {
        font-size: 1.5rem;
        font-weight: 700;
        color: var(--primary);
      }

      .empty-state {
        text-align: center;
        padding: 80px 20px;
      }

      .empty-state i {
        font-size: 5rem;
        color: #ddd;
        margin-bottom: 20px;
      }

      .section-title {
        position: relative;
        padding-bottom: 15px;
        margin-bottom: 30px;
        font-weight: 700;
        color: var(--dark);
      }

      .section-title::after {
        content: "";
        position: absolute;
        bottom: 0;
        left: 0;
        width: 60px;
        height: 4px;
        background: linear-gradient(
          to right,
          var(--primary),
          var(--primary-dark)
        );
        border-radius: 2px;
      }

      .category-badge {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        padding: 6px 16px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        box-shadow: 0 4px 10px rgba(255, 145, 0, 0.3);
      }

      .swal2-confirm {
        background-color: var(--primary) !important;
      }

      .user-avatar {
        width: 38px;
        height: 38px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary);
        font-weight: bold;
        margin-right: 10px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .discount-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: linear-gradient(135deg, #ff6b6b, #ff8e53);
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        z-index: 1;
        box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3);
      }

      .wishlist-btn {
        position: absolute;
        top: 15px;
        left: 15px;
        background: rgba(255, 255, 255, 0.9);
        border: none;
        border-radius: 50%;
        width: 38px;
        height: 38px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #666;
        transition: all 0.3s;
        z-index: 1;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }

      .wishlist-btn:hover,
      .wishlist-btn.active {
        background: var(--primary);
        color: white;
        transform: scale(1.1);
      }

      .login-modal .modal-content {
        border-radius: 20px;
        overflow: hidden;
        border: none;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      }

      .login-modal .modal-header {
        background: var(--header-gradient);
        color: white;
        border: none;
        padding: 25px 30px;
      }

      .login-modal .modal-body {
        padding: 30px;
      }

      .featured-badge {
        position: absolute;
        top: 15px;
        left: 15px;
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-dark)
        );
        color: white;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.7rem;
        font-weight: 600;
        z-index: 1;
        box-shadow: 0 4px 10px rgba(255, 145, 0, 0.3);
      }

      .product-card-wrapper {
        position: relative;
      }

      .login-page {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--header-gradient);
        padding: 20px;
      }

      .login-container {
        background: white;
        border-radius: 25px;
        overflow: hidden;
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
        width: 100%;
        max-width: 450px;
      }

      .login-header {
        background: var(--header-gradient);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .login-body {
        padding: 40px;
      }

      .session-expired {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        padding: 20px;
      }

      .session-expired-content {
        background: white;
        border-radius: 20px;
        padding: 40px;
        text-align: center;
        max-width: 500px;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      }

      .session-expired-content h3 {
        color: var(--primary);
        margin-bottom: 15px;
      }

      .session-expired-content p {
        margin-bottom: 25px;
        color: #666;
      }
      .product-detail-container {
        padding: 40px 0;
      }

      .product-detail-image {
        max-height: 500px;
        object-fit: contain;
        border-radius: 20px;
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        padding: 30px;
      }

      .product-detail-title {
        font-size: 2.2rem;
        font-weight: 700;
        margin-bottom: 20px;
        color: var(--dark);
      }

      .product-detail-price {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 20px;
      }

      .product-detail-description {
        font-size: 1.1rem;
        line-height: 1.7;
        margin-bottom: 30px;
        color: #555;
      }

      .product-detail-meta {
        margin-bottom: 30px;
      }

      .product-detail-meta-item {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
      }

      .product-detail-meta-item i {
        width: 30px;
        color: var(--primary);
      }

      .product-detail-actions {
        display: flex;
        gap: 15px;
        margin-bottom: 30px;
      }

      .product-detail-actions .btn {
        flex: 1;
        padding: 15px;
        font-weight: 600;
      }

      .product-detail-reviews {
        margin-top: 50px;
      }

      .review-item {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .review-header {
        display: flex;
        justify-content: space-between;
        margin-bottom: 15px;
      }

      .review-author {
        font-weight: 600;
        color: var(--dark);
      }

      .review-date {
        color: #888;
        font-size: 0.9rem;
      }

      .typed-text {
        min-height: 60px;
      }

      .hot-deals-typed {
        font-size: 3.5rem;
        font-weight: 700;
        min-height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      [data-aos] {
        pointer-events: none;
      }
      [data-aos].aos-animate {
        pointer-events: auto;
      }
    </style>
  </head>
  <body>
    <div id="session-expired" class="session-expired" style="display: none">
      <div class="session-expired-content">
        <i
          class="fas fa-exclamation-circle text-warning mb-3"
          style="font-size: 4rem"
        ></i>
        <h3>Session Expired</h3>
        <p>
          Your session has expired. Please login again to continue shopping.
        </p>
        <button class="btn btn-primary btn-lg" onclick="showLoginPage()">
          <i class="fas fa-sign-in-alt me-2"></i>Login Now
        </button>
      </div>
    </div>

    <div id="login-page" class="login-page" style="display: none">
      <div class="login-container">
        <div class="login-header">
          <h2><i class="fas fa-fire me-2 animated-icon"></i>NovaMart</h2>
          <p class="mb-0">Welcome back! Please login to your account</p>
        </div>
        <div class="login-body">
          <form id="login-form-page">
            <div class="mb-4">
              <label for="login-email-page" class="form-label"
                >Email address</label
              >
              <input
                type="email"
                class="form-control"
                id="login-email-page"
                placeholder="Enter a random mail"
                required
              />
            </div>
            <div class="mb-4">
              <label for="login-password-page" class="form-label"
                >Password</label
              >
              <input
                type="password"
                class="form-control"
                id="login-password-page"
                placeholder="Enter a random password"
                required
              />
            </div>
            <div class="mb-4 form-check">
              <input
                type="checkbox"
                class="form-check-input"
                id="remember-me-page"
              />
              <label class="form-check-label" for="remember-me-page"
                >Remember me</label
              >
            </div>
            <button type="submit" class="btn btn-primary w-100 py-3 fw-bold">
              Login to NovaMart
            </button>
          </form>
          <div class="text-center mt-4"></div>
        </div>
      </div>
    </div>

    <div id="main-app">
      <nav class="navbar navbar-expand-lg navbar-dark sticky-top">
        <div class="container">
          <a class="navbar-brand" href="#" onclick="showPage('home')">
            <i class="fas fa-fire me-2 animated-icon"></i>NovaMart
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav me-auto">
              <li class="nav-item">
                <a class="nav-link active" href="#" onclick="showPage('home')"
                  >Home</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showPage('cart')">
                  <i class="fas fa-shopping-cart"></i>
                  <span id="cart-badge" class="cart-badge">0</span>
                </a>
              </li>
            </ul>
            <form class="d-flex me-3">
              <div class="input-group">
                <input
                  class="form-control"
                  type="search"
                  placeholder="Search products..."
                  id="search-input"
                  oninput="searchProducts()"
                />
                <button class="btn btn-outline-light" type="button">
                  <i class="fas fa-search"></i>
                </button>
              </div>
            </form>
            <div class="navbar-nav">
              <div class="nav-item dropdown" id="user-dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  role="button"
                  data-bs-toggle="dropdown"
                >
                  <div class="user-avatar d-inline-flex align-items-center">
                    <span id="user-initial">U</span>
                  </div>
                  <span id="user-name">User</span>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="#"
                      ><i class="fas fa-user me-2"></i>Profile</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"
                      ><i class="fas fa-heart me-2"></i>Wishlist</a
                    >
                  </li>
                  <li>
                    <a class="dropdown-item" href="#"
                      ><i class="fas fa-history me-2"></i>Order History</a
                    >
                  </li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a class="dropdown-item" href="#" onclick="logout()"
                      ><i class="fas fa-sign-out-alt me-2"></i>Logout</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <div id="loading-spinner" class="loading-spinner">
        <div
          class="spinner-border text-primary"
          style="width: 3rem; height: 3rem"
          role="status"
        >
          <span class="visually-hidden">Loading...</span>
        </div>
      </div>

      <div id="home" class="page active-page">
        <div class="hero-section">
          <div class="container text-center">
            <div 
              class="hot-deals-typed mb-4" 
              id="hot-deals-typed"
              data-aos="fade-down" 
              data-aos-duration="1000"
            ></div>

            <p
              class="lead mb-4"
              data-aos="fade-up"
              data-aos-duration="1000"
              data-aos-delay="200"
            >
              Discover the latest trends and exclusive products with unbeatable
              prices
            </p>
            <div
              class="typed-text mb-4"
              id="typed-text"
              data-aos="fade-up"
              data-aos-duration="1000"
              data-aos-delay="400"
            ></div>
            <button
              class="btn btn-light btn-lg px-5 py-3 fw-bold"
              onclick="scrollToProducts()"
              data-aos="zoom-in"
              data-aos-duration="1000"
              data-aos-delay="600"
            >
              <i class="fas fa-shopping-bag me-2"></i>Shop Now
            </button>
          </div>
        </div>

        <div class="container">
          <!-- Filters -->
          <div class="filter-card" data-aos="fade-up" data-aos-duration="800">
            <div class="row">
              <div class="col-md-6">
                <label for="category-filter" class="form-label fw-bold"
                  >Filter by Category</label
                >
                <select
                  class="form-select"
                  id="category-filter"
                  onchange="filterProducts()"
                >
                  <option value="all">All Categories</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="price-range" class="form-label fw-bold"
                  >Price Range: $<span id="price-value">0 - 1000</span></label
                >
                <input
                  type="range"
                  class="form-range price-slider"
                  id="price-range"
                  min="0"
                  max="1000"
                  step="10"
                  value="1000"
                  oninput="updatePriceValue(this.value)"
                />
              </div>
            </div>
          </div>

          <h2
            class="section-title"
            data-aos="fade-right"
            data-aos-duration="800"
          >
            Featured Products
          </h2>
          <div class="row" id="products-container">
          </div>
        </div>
      </div>

      <div id="cart" class="page">
        <div class="container mt-4">
          <h2
            class="section-title"
            data-aos="fade-right"
            data-aos-duration="800"
          >
            Your Shopping Cart
          </h2>

          <div id="cart-items">
          </div>

          <div class="row mt-4">
            <div class="col-md-8"></div>
            <div class="col-md-4">
              <div
                class="checkout-card"
                data-aos="fade-left"
                data-aos-duration="800"
              >
                <h5 class="mb-3">Cart Summary</h5>
                <div class="d-flex justify-content-between mb-2">
                  <span>Subtotal:</span>
                  <span>$<span id="cart-subtotal">0.00</span></span>
                </div>
                <div class="d-flex justify-content-between mb-2">
                  <span>Shipping:</span>
                  <span>$<span id="cart-shipping">5.00</span></span>
                </div>
                <div class="d-flex justify-content-between mb-3">
                  <span>Tax:</span>
                  <span>$<span id="cart-tax">0.00</span></span>
                </div>
                <hr />
                <div class="d-flex justify-content-between mb-4">
                  <strong>Total:</strong>
                  <strong class="total-price"
                    >$<span id="cart-total">0.00</span></strong
                  >
                </div>
                <button
                  class="btn btn-primary w-100 py-3 fw-bold"
                  onclick="proceedToCheckout()"
                >
                  <i class="fas fa-credit-card me-2"></i>Proceed to Checkout
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="checkout" class="page">
        <div class="container mt-4">
          <h2
            class="section-title"
            data-aos="fade-right"
            data-aos-duration="800"
          >
            Checkout
          </h2>

          <div class="row">
            <div class="col-md-8">
              <div
                class="checkout-card mb-4"
                data-aos="fade-up"
                data-aos-duration="800"
              >
                <h5 class="mb-3">Order Summary</h5>
                <div id="checkout-items">
                </div>
                <hr />
                <div class="d-flex justify-content-between">
                  <strong>Total:</strong>
                  <strong class="total-price"
                    >$<span id="checkout-total">0.00</span></strong
                  >
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <div
                class="checkout-card"
                data-aos="fade-left"
                data-aos-duration="800"
              >
                <h5 class="mb-3">Shipping Information</h5>
                <form id="checkout-form">
                  <div class="mb-3">
                    <label for="name" class="form-label">Full Name</label>
                    <input
                      type="text"
                      class="form-control"
                      id="name"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="address" class="form-label">Address</label>
                    <textarea
                      class="form-control"
                      id="address"
                      rows="3"
                      required
                    ></textarea>
                  </div>
                  <div class="mb-3">
                    <label for="city" class="form-label">City</label>
                    <input
                      type="text"
                      class="form-control"
                      id="city"
                      required
                    />
                  </div>
                  <div class="row mb-3">
                    <div class="col-md-6">
                      <label for="zip" class="form-label">ZIP Code</label>
                      <input
                        type="text"
                        class="form-control"
                        id="zip"
                        required
                      />
                    </div>
                    <div class="col-md-6">
                      <label for="country" class="form-label">Country</label>
                      <select class="form-select" id="country" required>
                        <option value="">Select Country</option>
                        <option value="Pakistan">Pakistan</option>
                        <option value="India">India</option>
                        <option value="Afghanistan">Afghanistan</option>
                        <option value="China">China</option>
                      </select>
                    </div>
                  </div>
                  <div class="mb-4">
                    <label for="payment" class="form-label"
                      >Payment Method</label
                    >
                    <select class="form-select" id="payment" required>
                      <option value="">Select Payment Method</option>
                      <option value="credit">Credit Card</option>
                      <option value="debit">Debit Card</option>
                      <option value="paypal">PayPal</option>
                    </select>
                  </div>
                  <button
                    type="submit"
                    class="btn btn-primary w-100 py-3 fw-bold"
                  >
                    <i class="fas fa-lock me-2"></i>Place Order
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="product-detail" class="page">
        <div class="container product-detail-container">
          <button
            class="btn btn-outline-primary mb-4"
            onclick="showPage('home')"
          >
            <i class="fas fa-arrow-left me-2"></i>Back to Products
          </button>

          <div class="row">
            <div class="col-md-6" data-aos="fade-right" data-aos-duration="800">
              <img
                id="detail-image"
                src=""
                class="img-fluid product-detail-image"
                alt="Product Image"
              />
            </div>
            <div
              class="col-md-6"
              data-aos="fade-left"
              data-aos-duration="800"
              data-aos-delay="200"
            >
              <h1 id="detail-title" class="product-detail-title"></h1>
              <div class="product-detail-price" id="detail-price"></div>
              <div class="product-detail-meta">
                <div class="product-detail-meta-item">
                  <i class="fas fa-tag"></i>
                  <span id="detail-category"></span>
                </div>
                <div class="product-detail-meta-item">
                  <i class="fas fa-star"></i>
                  <span id="detail-rating"></span>
                </div>
                <div class="product-detail-meta-item">
                  <i class="fas fa-box"></i>
                  <span id="detail-stock"></span>
                </div>
              </div>
              <p id="detail-description" class="product-detail-description"></p>

              <div class="product-detail-actions">
                <button class="btn btn-primary" id="detail-add-to-cart">
                  <i class="fas fa-cart-plus me-2"></i>Add to Cart
                </button>
                <button class="btn btn-outline-primary" id="detail-wishlist">
                  <i class="fas fa-heart me-2"></i>Wishlist
                </button>
              </div>
            </div>
          </div>

          <div
            class="product-detail-reviews"
            data-aos="fade-up"
            data-aos-duration="800"
          >
            <h3 class="section-title">Customer Reviews</h3>
            <div id="detail-reviews">
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        <div class="container">
          <div class="row">
            <div class="col-md-4" data-aos="fade-up" data-aos-duration="800">
              <h4><i class="fas fa-fire me-2 animated-icon"></i>NovaMart</h4>
              <p>
                Premium online shopping experience with the latest trends and
                exclusive products.
              </p>
            </div>
            <div
              class="col-md-4"
              data-aos="fade-up"
              data-aos-duration="800"
              data-aos-delay="100"
            >
              <h5>Quick Links</h5>
              <ul class="list-unstyled">
                <li>
                  <a href="#" class="text-light" onclick="showPage('home')"
                    >Home</a
                  >
                </li>
                <li>
                  <a href="#" class="text-light" onclick="showPage('cart')"
                    >Cart</a
                  >
                </li>
                <li><a href="#" class="text-light">About Us</a></li>
                <li><a href="#" class="text-light">Contact</a></li>
              </ul>
            </div>
            <div
              class="col-md-4"
              data-aos="fade-up"
              data-aos-duration="800"
              data-aos-delay="200"
            >
              <h5>Contact Us</h5>
              <p><i class="fas fa-envelope me-2"></i> support@NovaMart.com</p>
              <p><i class="fas fa-phone me-2"></i> +1 (555) 123-4567</p>
              <div class="mt-3">
                <a href="#" class="text-light me-3"
                  ><i class="fab fa-facebook-f"></i
                ></a>
                <a href="#" class="text-light me-3"
                  ><i class="fab fa-twitter"></i
                ></a>
                <a href="#" class="text-light me-3"
                  ><i class="fab fa-instagram"></i
                ></a>
              </div>
            </div>
          </div>
          <hr class="my-4" />
          <div class="text-center">
            <p>&copy; 2023 NovaMart. All rights reserved.</p>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>

    <script>
      let products = [];
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      let categories = [];
      let currentUser = JSON.parse(localStorage.getItem("currentUser")) || null;
      let wishlist = JSON.parse(localStorage.getItem("wishlist")) || [];
      let sessionTimer = null;
      const SESSION_TIMEOUT = 30 * 60 * 1000; 
      let typed = null;
      let hotDealsTyped = null;

      document.addEventListener("DOMContentLoaded", function () {
        AOS.init({
          duration: 800,
          easing: "ease-in-out",
          once: true,
          mirror: false,
        });

        checkSession();
        loadProducts();
        updateCartBadge();
        setupSessionTimer();
        initTypedJS();
        initHotDealsTyped();
      });

      function initTypedJS() {
        const options = {
          strings: [
            "Exclusive deals just for you!",
            "Premium quality guaranteed.",
            "Fast and free shipping.",
            "Secure payment options.",
          ],
          typeSpeed: 50,
          backSpeed: 30,
          backDelay: 2000,
          startDelay: 500,
          loop: true,
          showCursor: true,
          cursorChar: "|",
        };

        typed = new Typed("#typed-text", options);
      }

      function initHotDealsTyped() {
        const hotDealsOptions = {
          strings: [
            "Hot Deals Await You!",
            "Exclusive Offers!",
            "Limited Time Discounts!",
            "Special Promotions!",
          ],
          typeSpeed: 60,
          backSpeed: 40,
          backDelay: 1500,
          startDelay: 500,
          loop: true,
          showCursor: true,
          cursorChar: "|",
          contentType: 'html'
        };

        hotDealsTyped = new Typed("#hot-deals-typed", hotDealsOptions);
      }

      function checkSession() {
        const sessionExpiry = localStorage.getItem("sessionExpiry");

        if (
          !currentUser ||
          !sessionExpiry ||
          Date.now() > parseInt(sessionExpiry)
        ) {
          showLoginPage();
        } else {
          showMainApp();
          resetSessionTimer();
        }
      }

      function WriteContent() {
        let ContentEditable = document.getElementById("HotDeals");
        if (ContentEditable.innerText.trim().length === 0) {
          ContentEditable.innerText = "Hot Deals Await You!";
        }
      }

      function setupSessionTimer() {
        if (sessionTimer) {
          clearTimeout(sessionTimer);
        }

        sessionTimer = setTimeout(() => {
          showSessionExpired();
        }, SESSION_TIMEOUT);
      }

      function resetSessionTimer() {
        const newExpiry = Date.now() + SESSION_TIMEOUT;
        localStorage.setItem("sessionExpiry", newExpiry.toString());

        setupSessionTimer();
      }

      function showSessionExpired() {
        document.getElementById("session-expired").style.display = "flex";
      }

      function showLoginPage() {
        document.getElementById("main-app").style.display = "none";
        document.getElementById("login-page").style.display = "flex";
        document.getElementById("session-expired").style.display = "none";
      }

      function showMainApp() {
        document.getElementById("main-app").style.display = "block";
        document.getElementById("login-page").style.display = "none";
        document.getElementById("session-expired").style.display = "none";
        checkUserStatus();
        showPage("home");
      }

      document
        .getElementById("login-form-page")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          const email = document.getElementById("login-email-page").value;
          const password = document.getElementById("login-password-page").value;

          if (email && password) {
            showLoading(true);
            setTimeout(() => {
              currentUser = {
                name: email.split("@")[0],
                email: email,
              };
              localStorage.setItem("currentUser", JSON.stringify(currentUser));

              resetSessionTimer();

              showLoading(false);

              Swal.fire({
                icon: "success",
                title: "Welcome to NovaMart!",
                text: `You've successfully logged in as ${currentUser.name}`,
                confirmButtonColor: "#FF9100",
                timer: 2000,
                showConfirmButton: false,
                position: "top-end",
                toast: true,
              }).then(() => {
                showMainApp();
              });
            }, 1000);
          } else {
            Swal.fire({
              icon: "error",
              title: "Login Failed",
              text: "Please enter valid email and password",
              confirmButtonColor: "#FF9100",
            });
          }
        });

      function checkUserStatus() {
        if (currentUser) {
          document.getElementById("user-dropdown").style.display = "block";
          document.getElementById("user-name").textContent = currentUser.name;
          document.getElementById("user-initial").textContent = currentUser.name
            .charAt(0)
            .toUpperCase();
        } else {
          document.getElementById("user-dropdown").style.display = "none";
        }
      }

      function logout() {
        Swal.fire({
          title: "Logout Confirmation",
          text: "Are you sure you want to logout?",
          icon: "question",
          showCancelButton: true,
          confirmButtonColor: "#FF9100",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, logout!",
        }).then((result) => {
          if (result.isConfirmed) {
            currentUser = null;
            localStorage.removeItem("currentUser");
            localStorage.removeItem("sessionExpiry");

            if (sessionTimer) {
              clearTimeout(sessionTimer);
            }

            Swal.fire({
              icon: "success",
              title: "Logged Out",
              text: "You have been successfully logged out",
              confirmButtonColor: "#FF9100",
              timer: 1500,
              showConfirmButton: false,
              position: "top-end",
              toast: true,
            }).then(() => {
              showLoginPage();
            });
          }
        });
      }

      function showPage(pageId) {
        resetSessionTimer();

        document.querySelectorAll(".page").forEach((page) => {
          page.classList.remove("active-page");
        });
        document.getElementById(pageId).classList.add("active-page");

        document.querySelectorAll(".nav-link").forEach((link) => {
          link.classList.remove("active");
        });

        if (pageId === "home") {
          document
            .querySelector(".nav-link[onclick=\"showPage('home')\"]")
            .classList.add("active");
          setTimeout(() => {
            AOS.refresh();
          }, 100);
        } else if (pageId === "cart") {
          document
            .querySelector(".nav-link[onclick=\"showPage('cart')\"]")
            .classList.add("active");
          displayCartItems();
        } else if (pageId === "checkout") {
          displayCheckoutItems();
        } else if (pageId === "product-detail") {
        }
      }

      function showProductDetail(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        document.getElementById("detail-image").src = product.image;
        document.getElementById("detail-title").textContent = product.title;
        document.getElementById(
          "detail-price"
        ).textContent = `$${product.price}`;
        document.getElementById("detail-category").textContent =
          product.category.charAt(0).toUpperCase() + product.category.slice(1);
        document.getElementById(
          "detail-rating"
        ).innerHTML = `${generateStarRating(product.rating.rate)} (${
          product.rating.count
        } reviews)`;
        document.getElementById("detail-stock").textContent = `In Stock (${
          Math.floor(Math.random() * 100) + 20
        } units available)`;
        document.getElementById("detail-description").textContent =
          product.description;

        document.getElementById("detail-add-to-cart").onclick = function () {
          addToCart(productId);
        };

        const wishlistBtn = document.getElementById("detail-wishlist");
        wishlistBtn.innerHTML = wishlist.includes(productId)
          ? '<i class="fas fa-heart me-2"></i>Remove from Wishlist'
          : '<i class="fas fa-heart me-2"></i>Add to Wishlist';
        wishlistBtn.onclick = function () {
          toggleWishlist(productId);
          wishlistBtn.innerHTML = wishlist.includes(productId)
            ? '<i class="fas fa-heart me-2"></i>Remove from Wishlist'
            : '<i class="fas fa-heart me-2"></i>Add to Wishlist';
        };

        displayProductReviews(productId);

        showPage("product-detail");
      }

      function displayProductReviews(productId) {
        const reviewsContainer = document.getElementById("detail-reviews");
        const reviews = [
          {
            author: "John D.",
            date: "2023-05-15",
            rating: 5,
            comment:
              "Excellent product! Fast delivery and great quality. Would definitely buy again.",
          },
          {
            author: "Sarah M.",
            date: "2023-04-22",
            rating: 4,
            comment:
              "Good value for money. The product met my expectations. Delivery was a bit slow though.",
          },
          {
            author: "Mike T.",
            date: "2023-03-10",
            rating: 5,
            comment:
              "Absolutely love it! Better than I expected. The quality is outstanding.",
          },
        ];

        reviewsContainer.innerHTML = reviews
          .map(
            (review) => `
                <div class="review-item" data-aos="fade-up" data-aos-duration="600">
                    <div class="review-header">
                        <div class="review-author">${review.author}</div>
                        <div class="review-date">${review.date}</div>
                    </div>
                    <div class="mb-2">${generateStarRating(review.rating)}</div>
                    <p class="mb-0">${review.comment}</p>
                </div>
            `
          )
          .join("");
      }

      function scrollToProducts() {
        document
          .getElementById("products-container")
          .scrollIntoView({ behavior: "smooth" });
      }

      async function loadProducts() {
        showLoading(true);
        try {
          const response = await fetch("https://fakestoreapi.com/products");
          products = await response.json();

          products = products.map((product, index) => {
            if (index % 3 === 0) {
              product.originalPrice = (product.price * 1.2).toFixed(2);
              product.discount = "20% OFF";
            }

            if (index % 5 === 0) {
              product.featured = true;
            }

            return product;
          });

          displayProducts(products);
          populateCategories(products);
        } catch (error) {
          console.error("Error fetching products:", error);
          Swal.fire({
            icon: "error",
            title: "Connection Error",
            text: "Failed to load products. Please check your connection and try again.",
            confirmButtonColor: "#FF9100",
          });
        } finally {
          showLoading(false);
        }
      }

      function displayProducts(productsToDisplay) {
        const container = document.getElementById("products-container");

        if (productsToDisplay.length === 0) {
          container.innerHTML = `
                    <div class="empty-state col-12" data-aos="fade-up" data-aos-duration="800">
                        <i class="fas fa-search"></i>
                        <h3>No products found</h3>
                        <p>Try adjusting your filters or search terms</p>
                    </div>
                `;
          return;
        }

        container.innerHTML = productsToDisplay
          .map(
            (product, index) => `
                <div class="col-md-6 col-lg-4 mb-4 product-card-wrapper" data-aos="fade-up" data-aos-duration="800" data-aos-delay="${
                  (index % 3) * 100
                }">
                    ${
                      product.featured
                        ? '<span class="featured-badge">Featured</span>'
                        : ""
                    }
                    ${
                      product.discount
                        ? `<span class="discount-badge">${product.discount}</span>`
                        : ""
                    }
                    <button class="wishlist-btn ${
                      wishlist.includes(product.id) ? "active" : ""
                    }" onclick="toggleWishlist(${product.id})">
                        <i class="fas fa-heart"></i>
                    </button>
                    <div class="card product-card h-100">
                        <img src="${
                          product.image
                        }" class="card-img-top product-image" alt="${
              product.title
            }">
                        <div class="card-body d-flex flex-column">
                            <span class="category-badge mb-2">${
                              product.category
                            }</span>
                            <h5 class="card-title product-title">${
                              product.title
                            }</h5>
                            <p class="card-text flex-grow-1">${product.description.substring(
                              0,
                              100
                            )}...</p>
                            <div class="mt-auto">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <div>
                                        <span class="product-price">$${
                                          product.price
                                        }</span>
                                        ${
                                          product.originalPrice
                                            ? `<small class="text-muted text-decoration-line-through ms-2">$${product.originalPrice}</small>`
                                            : ""
                                        }
                                    </div>
                                    <div class="rating">
                                        ${generateStarRating(
                                          product.rating.rate
                                        )}
                                        <small class="text-muted">(${
                                          product.rating.count
                                        })</small>
                                    </div>
                                </div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-primary flex-fill" onclick="addToCart(${
                                      product.id
                                    })">
                                        <i class="fas fa-cart-plus me-2"></i>Add to Cart
                                    </button>
                                    <button class="btn btn-outline-primary" onclick="showProductDetail(${
                                      product.id
                                    })">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");
      }

      function toggleWishlist(productId) {
        if (!currentUser) {
          Swal.fire({
            title: "Login Required",
            text: "Please login to add items to your wishlist",
            icon: "info",
            showCancelButton: true,
            confirmButtonColor: "#FF9100",
            cancelButtonColor: "#d33",
            confirmButtonText: "Login Now",
          }).then((result) => {
            if (result.isConfirmed) {
              showLoginPage();
            }
          });
          return;
        }

        const index = wishlist.indexOf(productId);
        if (index > -1) {
          wishlist.splice(index, 1);
        } else {
          wishlist.push(productId);
        }

        localStorage.setItem("wishlist", JSON.stringify(wishlist));
        displayProducts(products);

        const action = index > -1 ? "removed from" : "added to";
        Swal.fire({
          icon: "success",
          title: `Product ${action} wishlist`,
          showConfirmButton: false,
          timer: 1000,
          position: "top-end",
          toast: true,
        });
      }

      function generateStarRating(rating) {
        let stars = "";
        const fullStars = Math.floor(rating);
        const halfStar = rating % 1 >= 0.5;

        for (let i = 0; i < fullStars; i++) {
          stars += '<i class="fas fa-star text-warning"></i>';
        }

        if (halfStar) {
          stars += '<i class="fas fa-star-half-alt text-warning"></i>';
        }

        const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
        for (let i = 0; i < emptyStars; i++) {
          stars += '<i class="far fa-star text-warning"></i>';
        }

        return stars;
      }

      function populateCategories(products) {
        const categoryFilter = document.getElementById("category-filter");
        categories = [...new Set(products.map((product) => product.category))];

        categories.forEach((category) => {
          const option = document.createElement("option");
          option.value = category;
          option.textContent =
            category.charAt(0).toUpperCase() + category.slice(1);
          categoryFilter.appendChild(option);
        });
      }

      function filterProducts() {
        const categoryFilter = document.getElementById("category-filter").value;
        const priceRange = document.getElementById("price-range").value;

        let filteredProducts = products;

        if (categoryFilter !== "all") {
          filteredProducts = filteredProducts.filter(
            (product) => product.category === categoryFilter
          );
        }

        filteredProducts = filteredProducts.filter(
          (product) => product.price <= priceRange
        );

        displayProducts(filteredProducts);
      }

      function updatePriceValue(value) {
        document.getElementById("price-value").textContent = `0 - ${value}`;
        filterProducts();
      }

      function searchProducts() {
        const searchTerm = document
          .getElementById("search-input")
          .value.toLowerCase();

        if (searchTerm.trim() === "") {
          filterProducts();
          return;
        }

        const filteredProducts = products.filter(
          (product) =>
            product.title.toLowerCase().includes(searchTerm) ||
            product.description.toLowerCase().includes(searchTerm) ||
            product.category.toLowerCase().includes(searchTerm)
        );

        displayProducts(filteredProducts);
      }

      function addToCart(productId) {
        const product = products.find((p) => p.id === productId);
        if (!product) return;

        const existingItem = cart.find((item) => item.id === productId);

        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({
            id: product.id,
            title: product.title,
            price: product.price,
            image: product.image,
            quantity: 1,
          });
        }

        updateLocalStorage();
        updateCartBadge();

        Swal.fire({
          icon: "success",
          title: "Added to Cart!",
          html: `
                    <div class="text-center">
                        <img src="${product.image}" alt="${product.title}" style="max-height: 100px; max-width: 100%; margin-bottom: 15px;">
                        <p><strong>${product.title}</strong> has been added to your cart.</p>
                    </div>
                `,
          showCancelButton: true,
          confirmButtonText: "View Cart",
          cancelButtonText: "Continue Shopping",
          confirmButtonColor: "#FF9100",
          cancelButtonColor: "#6c757d",
        }).then((result) => {
          if (result.isConfirmed) {
            showPage("cart");
          }
        });
      }

      function removeFromCart(productId) {
        const item = cart.find((item) => item.id === productId);

        Swal.fire({
          title: "Remove Item",
          text: `Are you sure you want to remove ${item.title} from your cart?`,
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#FF9100",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, remove it!",
        }).then((result) => {
          if (result.isConfirmed) {
            cart = cart.filter((item) => item.id !== productId);
            updateLocalStorage();
            updateCartBadge();
            displayCartItems();

            Swal.fire({
              icon: "success",
              title: "Removed!",
              text: "Item has been removed from your cart.",
              showConfirmButton: false,
              timer: 1500,
              position: "top-end",
              toast: true,
              background: "var(--light)",
              iconColor: "var(--success)",
            });
          }
        });
      }

      function updateQuantity(productId, change) {
        const item = cart.find((item) => item.id === productId);
        if (!item) return;

        item.quantity += change;

        if (item.quantity <= 0) {
          removeFromCart(productId);
        } else {
          updateLocalStorage();
          displayCartItems();
        }
      }

      function updateLocalStorage() {
        localStorage.setItem("cart", JSON.stringify(cart));
      }

      function updateCartBadge() {
        const totalItems = cart.reduce(
          (total, item) => total + item.quantity,
          0
        );
        document.getElementById("cart-badge").textContent = totalItems;
      }

      function displayCartItems() {
        const container = document.getElementById("cart-items");
        const subtotalElement = document.getElementById("cart-subtotal");
        const shippingElement = document.getElementById("cart-shipping");
        const taxElement = document.getElementById("cart-tax");
        const totalElement = document.getElementById("cart-total");

        if (cart.length === 0) {
          container.innerHTML = `
                    <div class="empty-state" data-aos="fade-up" data-aos-duration="800">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Your cart is empty</h3>
                        <p>Add some products to your cart to continue shopping</p>
                        <button class="btn btn-primary mt-3" onclick="showPage('home')">
                            <i class="fas fa-shopping-bag me-2"></i>Start Shopping
                        </button>
                    </div>
                `;
          subtotalElement.textContent = "0.00";
          shippingElement.textContent = "0.00";
          taxElement.textContent = "0.00";
          totalElement.textContent = "0.00";
          return;
        }

        container.innerHTML = cart
          .map(
            (item, index) => `
                <div class="cart-item">
                    <div class="row align-items-center">
                        <div class="col-md-2">
                            <img src="${
                              item.image
                            }" class="cart-item-image" alt="${item.title}">
                        </div>
                        <div class="col-md-4">
                            <h5 class="product-title">${item.title}</h5>
                            <p class="text-primary fw-bold">$${item.price}</p>
                        </div>
                        <div class="col-md-3">
                            <div class="quantity-control">
                                <div class="quantity-btn" onclick="updateQuantity(${
                                  item.id
                                }, -1)">
                                    <i class="fas fa-minus"></i>
                                </div>
                                <input type="text" class="quantity-input" value="${
                                  item.quantity
                                }" readonly>
                                <div class="quantity-btn" onclick="updateQuantity(${
                                  item.id
                                }, 1)">
                                    <i class="fas fa-plus"></i>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <p class="fw-bold">$${(
                              item.price * item.quantity
                            ).toFixed(2)}</p>
                        </div>
                        <div class="col-md-1">
                            <button class="btn btn-outline-danger btn-sm" onclick="removeFromCart(${
                              item.id
                            })">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");

        const subtotal = cart.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
        const shipping = subtotal > 0 ? 5.0 : 0.0;
        const tax = subtotal * 0.1; // 10% tax
        const total = subtotal + shipping + tax;

        subtotalElement.textContent = subtotal.toFixed(2);
        shippingElement.textContent = shipping.toFixed(2);
        taxElement.textContent = tax.toFixed(2);
        totalElement.textContent = total.toFixed(2);
      }

      // Proceed to Checkout with SweetAlert
      function proceedToCheckout() {
        if (cart.length === 0) {
          Swal.fire({
            icon: "warning",
            title: "Empty Cart",
            text: "Your cart is empty. Add some products before proceeding to checkout.",
            confirmButtonColor: "#FF9100",
          });
          return;
        }

        showPage("checkout");
      }

      // Display Checkout Items
      function displayCheckoutItems() {
        const container = document.getElementById("checkout-items");
        const totalElement = document.getElementById("checkout-total");

        if (cart.length === 0) {
          container.innerHTML = '<p class="text-center">No items in cart.</p>';
          totalElement.textContent = "0.00";
          return;
        }

        container.innerHTML = cart
          .map(
            (item) => `
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                        <img src="${item.image}" alt="${
              item.title
            }" style="width: 50px; height: 50px; object-fit: contain; margin-right: 15px;">
                        <div>
                            <h6 class="mb-0">${item.title}</h6>
                            <small class="text-muted">Quantity: ${
                              item.quantity
                            }</small>
                        </div>
                    </div>
                    <div class="fw-bold">$${(
                      item.price * item.quantity
                    ).toFixed(2)}</div>
                </div>
            `
          )
          .join("");

        const subtotal = cart.reduce(
          (sum, item) => sum + item.price * item.quantity,
          0
        );
        const shipping = subtotal > 0 ? 5.0 : 0.0;
        const tax = subtotal * 0.1; // 10% tax
        const total = subtotal + shipping + tax;

        totalElement.textContent = total.toFixed(2);
      }

      // Checkout Form Submission
      document
        .getElementById("checkout-form")
        .addEventListener("submit", function (e) {
          e.preventDefault();

          // In a real application, you would send this data to a server
          const formData = {
            name: document.getElementById("name").value,
            email: document.getElementById("email").value,
            address: document.getElementById("address").value,
            city: document.getElementById("city").value,
            zip: document.getElementById("zip").value,
            country: document.getElementById("country").value,
            payment: document.getElementById("payment").value,
          };

          // Show loading state
          Swal.fire({
            title: "Processing Your Order",
            text: "Please wait while we process your payment...",
            allowOutsideClick: false,
            didOpen: () => {
              Swal.showLoading();
            },
          });

          setTimeout(() => {
            // Clear cart
            cart = [];
            updateLocalStorage();
            updateCartBadge();

            Swal.fire({
              icon: "success",
              title: "Order Placed Successfully!",
              html: `
                        <div class="text-center">
                            <i class="fas fa-check-circle text-success mb-3" style="font-size: 4rem;"></i>
                            <p>Thank you for your purchase! Your order has been confirmed.</p>
                            <p>A confirmation email has been sent to <strong>${
                              formData.email
                            }</strong>.</p>
                            <p class="mt-3"><strong>Order Total: $${
                              document.getElementById("checkout-total")
                                .textContent
                            }</strong></p>
                        </div>
                    `,
              confirmButtonColor: "#FF9100",
              confirmButtonText: "Continue Shopping",
            }).then(() => {
              showPage("home");
            });
          }, 2000);
        });

      function showLoading(show) {
        document.getElementById("loading-spinner").style.display = show
          ? "block"
          : "none";
      }
    </script>
  </body>
</html>